<!-- ======================================
     HEADER PRINCIPAL MODERNO
     ====================================== -->
<div class="equipo-header">
  <div class="header-content">
    <h1 class="page-title">
      <mat-icon class="title-icon">groups</mat-icon>
      Nuestro Equipo
    </h1>
    <p class="page-description">
      Conoce a los profesionales que hacen posible el mejor periodismo deportivo
    </p>
    
    <!-- Estadísticas generales -->
    <div class="stats-general">
      <div class="stat-item" style="--delay: 0s">
        <span class="stat-number">{{ totalMiembros }}</span>
        <span class="stat-label">Miembros</span>
      </div>
      
      <div class="stat-item" style="--delay: 0.1s">
        <span class="stat-number">{{ totalPublicaciones || 0 }}</span>
        <span class="stat-label">Publicaciones</span>
      </div>
      
      <div class="stat-item" style="--delay: 0.2s" *ngIf="miembroMasProductivo">
        <span class="stat-number">⭐</span>
        <span class="stat-label">{{ miembroMasProductivo.nombre || 'Destacado' }}</span>
      </div>
    </div>
  </div>
</div>

<!-- ======================================
     FILTROS Y BÚSQUEDA MODERNOS
     ====================================== -->
<div class="filtros-section">
  <div class="filtros-container">
    <div class="filtros-card">
      <div class="filtros-header">
        <h3>
          <mat-icon>tune</mat-icon>
          Filtros y Búsqueda
        </h3>
        <span class="results-count">{{ miembrosFiltrados.length }} miembros encontrados</span>
      </div>
      
      <div class="filtros-content modern-filtros-row">
        <div class="modern-filtro-item">
          <mat-form-field appearance="outline" class="search-field">
            <mat-label>Buscar miembro...</mat-label>
            <input 
              matInput 
              [(ngModel)]="textoBusqueda"
              (input)="onBusquedaChange(textoBusqueda)"
              placeholder="Nombre, apellido o rol">
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>
        </div>
        <div class="modern-filtro-item">
          <mat-form-field appearance="outline" class="role-field">
            <mat-label>Filtrar por rol</mat-label>
            <mat-select [(ngModel)]="rolSeleccionado" (selectionChange)="onRolChange()">
              <mat-option value="">Todos los roles</mat-option>
              <mat-option *ngFor="let rol of rolesDisponibles" [value]="rol">
                {{ rol }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="modern-filtro-item btn-item">
          <button 
            mat-stroked-button 
            color="primary" 
            (click)="limpiarFiltros()"
            class="clear-filters-btn">
            <mat-icon>clear</mat-icon>
            Limpiar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ======================================
     SECCIÓN DE MIEMBROS MODERNA
     ====================================== -->

<!-- Estado de carga -->
<div *ngIf="cargando" class="loading-section">
  <div class="loading-content">
    <mat-progress-spinner 
      mode="indeterminate" 
      diameter="60"
      color="primary">
    </mat-progress-spinner>
    <h3>Cargando nuestro equipo...</h3>
    <p>Estamos preparando la información de nuestros profesionales</p>
  </div>
</div>

<!-- Estado de error -->
<div *ngIf="error && !cargando" class="error-section">
  <div class="error-card">
    <mat-icon class="error-icon">error_outline</mat-icon>
    <h3>Oops! Algo salió mal</h3>
    <p>No pudimos cargar la información del equipo. Por favor, intenta nuevamente.</p>
    <button mat-raised-button color="primary" (click)="recargar()" class="retry-btn">
      <mat-icon>refresh</mat-icon>
      Reintentar
    </button>
  </div>
</div>

<!-- Grid de miembros moderno -->
<div *ngIf="!cargando && !error" class="miembros-section">
  <!-- Sin resultados -->
  <div *ngIf="miembrosFiltrados.length === 0" class="no-results-section">
    <div class="no-results-card">
      <mat-icon class="no-results-icon">search_off</mat-icon>
      <h3>No se encontraron miembros</h3>
      <p>No hay miembros que coincidan con tu búsqueda. Intenta con otros criterios.</p>
      <button mat-raised-button color="primary" (click)="limpiarFiltros()" class="clear-btn">
        <mat-icon>clear</mat-icon>
        Limpiar filtros
      </button>
    </div>
  </div>

<div *ngIf="miembrosFiltrados.length > 0" class="miembros-grid">
  <app-miembro-card 
    *ngFor="let miembro of miembrosFiltrados; trackBy: trackByMiembro; let i = index"
    [miembro]="miembro"
    [mostrarEstadisticas]="mostrarEstadisticas"
    [mostrarAcciones]="false"
    [esAdmin]="false"
    [vista]="'card'">
  </app-miembro-card>
</div>

<!-- ======================================
     FOOTER INFORMATIVO MODERNO
     ====================================== -->
<div *ngIf="!cargando && !error && miembrosFiltrados.length > 0" class="equipo-footer">
  <div class="footer-content">
    <h3 class="footer-title">
      ¿Quieres formar parte de nuestro equipo?
    </h3>
    <p class="footer-description">
      Únete a nuestra familia de periodistas deportivos y contribuye a llevar las mejores noticias a nuestra audiencia.
    </p>
    <div class="footer-stats">
      <div class="footer-stat">
        <span class="stat-number">{{ totalMiembros }}</span>
        <span class="stat-label">Profesionales</span>
      </div>
      <div class="footer-stat">
        <span class="stat-number">{{ totalPublicaciones }}</span>
        <span class="stat-label">Publicaciones</span>
      </div>
      <div class="footer-stat">
        <span class="stat-number">24/7</span>
        <span class="stat-label">Cobertura</span>
      </div>
    </div>
  </div>
</div>
